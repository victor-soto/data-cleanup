<h1>Lookup</h1>

<div class="row">
  <div class="col-4">
    <table class="table table-bordered table-xs table-responsive">
      <thead>
        <tr>
          <% @csv_target.headers.each_with_index do |header, index| %>
            <th><%= header %></th>
          <% end %>
        </tr>
      </thead>
      <tbody>
        <tr>
          <% @csv_target[0..9].each do |row| %>
            <tr>
              <% row.each do |element| %>
                <td><%= element[1] %></td>
              <% end %>
            </tr>
          <% end %>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="col-4">
    <%= form_tag generate_lookup_csv_path, target: "_blank" do %>
      <table class="simple-table" style="width: 100%;">
        <tbody>
          <tr>
            <td style="width: 50%;" valign="top">
              <div>
                <div class="form-group">
                  <%= label_tag :column1, "Find column" %>
                  <%= select_tag :column1, options_for_select(@csv_target.headers.map { |e| e }), class: "form-control" %>
                </div>
              </div>
            </td>
            <td style="width: 50%;">
              <div>
                <div class="form-group">
                  <%= label_tag :column2, "Match column" %>
                  <%= select_tag :column2, options_for_select(@csv_origin.headers.map { |e| e }), class: "form-control" %>
                </div>
                <div class="form-group">
                  <%= label_tag :column3, "Get value" %>
                  <%= select_tag :column3, options_for_select(@csv_origin.headers.map { |e| e }), class: "form-control" %>
                </div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
      <%= submit_tag 'Generate CSV', class: 'btn btn-success' %>
      <%= link_to "Reset", csv_engine_lookup_path, class: "btn btn-danger" %>
    <% end %>
  </div>
  <div class="col-4">
    <table class="table table-bordered table-xs table-responsive">
      <thead>
        <tr>
          <% @csv_origin.headers.each_with_index do |header, index| %>
            <th><%= header %></th>
          <% end %>
        </tr>
      </thead>
      <tbody>
        <tr>
          <% @csv_origin[0..9].each do |row| %>
            <tr>
              <% row.each do |element| %>
                <td><%= element[1] %></td>
              <% end %>
            </tr>
          <% end %>
        </tr>
      </tbody>
    </table>
  </div>
</div>